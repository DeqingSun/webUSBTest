<html>

<head>
    <meta charset="utf-8">
    <title>JavaScript editor with firmata</title>
    <script src="./ace-src-min/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor;
        window.onload = function () {
            editor = ace.edit("editor");
            editor.getSession().setMode("ace/mode/javascript");
            editor.getSession().setTabSize(2);
            editor.getSession().setUseWrapMode(true);
            editor.setValue("console.log('This is example turn Pin13 High for 1 second');\nmodifiedFirmata.simpleWriteDigital(13, true);\nsetTimeout(function(){modifiedFirmata.simpleWriteDigital(13, false);}, 1000);");
            editor.navigateFileStart();
        }
    </script>
    <style>
        body {
            background-color: #fff;
            font-family: sans-serif;
        }
        
        h1 {
            font-weight: normal;
            font-size: 140%;
        }
        
        #editor {
            margin-left: 0px;
            margin-top: 0px;
            width: 800px;
            height: 400px;
        }
    </style>
</head>

<body>
    <div id="editor"></div>
    <button id="connect">Connect</button>
    <p id="eval_result"></p>
    <button onclick="runCode()" id="runcode">Run Code</button>
    <div id="buffer"> </div>

    <script>
        function runCode() {
            console.log("run code!");
            try {
                eval(editor.getValue());
                document.getElementById("eval_result").innerHTML = "Code applied on " + Date();
            } catch (e) {
                console.log(e.message);
                if (e instanceof SyntaxError) {
                    document.getElementById("eval_result").innerHTML = "Syntax Error. Code not applied";
                } else {
                    document.getElementById("eval_result").innerHTML = e.message;
                }
            }
        }
    </script>
    
    <script src="serial.js"></script>
    <script src="modifiedFirmata.js"></script>
    <script src="main.js"></script>

</body>

</html>